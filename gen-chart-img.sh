#!/bin/bash

INDEX_PAGE_TITLE='Ow生涯数据 - generated by github.com/shaohsiung/OwDataset'
INDEX_PAGE_HEADER='🦸🏻‍♂️ 🤖 Ow生涯数据(按日期统计): '

gen_bar_chart_img() {
    LABEL_TITLE="'$1'"
    LABELS="[$2]"
    DATASET="[$3]"
    cat <<EOF
https://quickchart.io/chart?c={type:'bar',data:{labels:${LABELS},datasets:[{label:${LABEL_TITLE},data:${DATASET}}]}}
EOF
}

gen_bar_chart_img_name() {
    #TITLE=$(urlencode $1)
    local TITLE=$1
    local DATE=$2
    echo "${DATE}-bar-${TITLE}.png"
}

gen_bar_chart_img_html() {
    TITLE=$1
    IMG_PATH=$2
    # https://serverfault.com/questions/72476/clean-way-to-write-complex-multi-line-string-to-a-variable
    cat <<EOF
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${TITLE}</title>
</head>
<body style="display: flex; justify-content: center;">
    <img src="${IMG_PATH}" />
</body>
</html>
EOF
}

gen_index_html() {
  cat <<EOF
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$INDEX_PAGE_TITLE</title>
</head>
<body>
    <h1>$INDEX_PAGE_HEADER</h1>
    <ul>
        <li>
            <span>2021-10-23</span>
            <p>
                <a href="#">🕐 游戏时间</a>
                <a href="#">🍾 比赛胜利</a>
                <a href="#">🎯 武器命中率</a>
                <a href="#">🔫 单次存活时消灭</a>
                <a href="#">⚔️ 最佳瞬间消灭</a>
            </p>
        </li>
    </ul>
</body>
</html>
EOF
}

#append_li_to_index_html() {
#  
#}
